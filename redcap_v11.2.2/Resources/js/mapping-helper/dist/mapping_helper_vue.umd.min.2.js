(("undefined"!==typeof self?self:this)["webpackJsonpmapping_helper_vue"]=("undefined"!==typeof self?self:this)["webpackJsonpmapping_helper_vue"]||[]).push([[2,0],{"15a5":function(t,e,n){"use strict";var r=n("7a04"),o=n.n(r);o.a},"1c4c":function(t,e,n){"use strict";var r=n("9b43"),o=n("5ca1"),a=n("4bf8"),i=n("1fa8"),s=n("33a4"),c=n("9def"),l=n("f1ae"),u=n("27ee");o(o.S+o.F*!n("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,o,f,d=a(t),p="function"==typeof this?this:Array,b=arguments.length,h=b>1?arguments[1]:void 0,m=void 0!==h,v=0,y=u(d);if(m&&(h=r(h,b>2?arguments[2]:void 0,2)),void 0==y||p==Array&&s(y))for(e=c(d.length),n=new p(e);e>v;v++)l(n,v,m?h(d[v],v):d[v]);else for(f=y.call(d),n=new p;!(o=f.next()).done;v++)l(n,v,m?i(f,h,[o.value,v],!0):o.value);return n.length=v,n}})},"1fa8":function(t,e,n){var r=n("cb7c");t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(i){var a=t["return"];throw void 0!==a&&r(a.call(t)),i}}},"27ee":function(t,e,n){var r=n("23c6"),o=n("2b4c")("iterator"),a=n("84f2");t.exports=n("8378").getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||a[r(t)]}},"33a4":function(t,e,n){var r=n("84f2"),o=n("2b4c")("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||a[o]===t)}},"37c8":function(t,e,n){e.f=n("2b4c")},"3a72":function(t,e,n){var r=n("7726"),o=n("8378"),a=n("2d00"),i=n("37c8"),s=n("86cc").f;t.exports=function(t){var e=o.Symbol||(o.Symbol=a?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:i.f(t)})}},"46fd":function(t,e,n){"use strict";var r=n("7b5b"),o=n.n(r);o.a},4917:function(t,e,n){"use strict";var r=n("cb7c"),o=n("9def"),a=n("0390"),i=n("5f1b");n("214f")("match",1,(function(t,e,n,s){return[function(n){var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=s(n,t,this);if(e.done)return e.value;var c=r(t),l=String(this);if(!c.global)return i(c,l);var u=c.unicode;c.lastIndex=0;var f,d=[],p=0;while(null!==(f=i(c,l))){var b=String(f[0]);d[p]=b,""===b&&(c.lastIndex=a(l,o(c.lastIndex),u)),p++}return 0===p?null:d}]}))},"5cc5":function(t,e,n){var r=n("2b4c")("iterator"),o=!1;try{var a=[7][r]();a["return"]=function(){o=!0},Array.from(a,(function(){throw 2}))}catch(i){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var a=[7],s=a[r]();s.next=function(){return{done:n=!0}},a[r]=function(){return s},t(a)}catch(i){}return n}},"5d58":function(t,e,n){t.exports=n("d8d6")},"5df3":function(t,e,n){"use strict";var r=n("02f4")(!0);n("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},"6fc5":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"node"},[t.isArray(t.payload)?n("span",{staticClass:"parenthesis open",domProps:{textContent:t._s("[")}}):t._e(),t.isObject(t.payload)?n("span",{staticClass:"parenthesis open",domProps:{textContent:t._s("{")}}):t._e(),n("span",{staticClass:"expander text-muted",on:{click:function(e){return e.stopPropagation(),t.onClick(e)}}},[t.open?n("font-awesome-icon",{attrs:{icon:["fas","chevron-circle-down"]}}):n("font-awesome-icon",{attrs:{icon:["fas","chevron-circle-right"]}})],1),t.open?t._l(t.payload,(function(e,r){return n("span",{key:r,staticClass:"child d-block ml-2"},[t.isArray(t.payload)?t._e():n("span",{staticClass:"mr-2 font-weight-bold"},[t._v('"'+t._s(r)+'":')]),t.isLeaf(e)?n("span",{class:t.getClass(e),domProps:{textContent:t._s(t.print(e))}}):n("Node",{attrs:{payload:e}}),t.isLast(r)?t._e():n("span",[t._v(",")])],1)})):t._e(),t.isArray(t.payload)?n("span",{staticClass:"parenthesis closed",domProps:{textContent:t._s("]")}}):t._e(),t.isObject(t.payload)?n("span",{staticClass:"parenthesis closed",domProps:{textContent:t._s("}")}}):t._e()],2)},o=[],a=n("75fc"),i=(n("ac6a"),n("cadf"),n("456d"),n("7618")),s={name:"Node",data:function(){return{open:!0}},components:{Node:Node},props:{payload:{type:[Object,Array],default:function(){return{}}}},methods:{isLeaf:function(t){return!(this.isObject(t)||this.isArray(t))},isObject:function(t){return"object"===Object(i["a"])(t)&&!Array.isArray(t)},isArray:function(t){return Array.isArray(t)},isLast:function(t){if(this.isObject(this.payload)){var e=Object.keys(this.payload);return e.slice(-1)[0]===t}return!!this.isArray(this.payload)&&t===Object(a["a"])(this.payload).length-1},print:function(t){return"string"===typeof t?'"'.concat(t,'"'):t},getClass:function(t){var e=Object(i["a"])(t);return e},onClick:function(){this.open=!this.open}}},c=s,l=(n("8b67"),n("2877")),u=Object(l["a"])(c,r,o,!1,null,"6adeaa6d",null);e["a"]=u.exports},"75fc":function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("a745"),o=n.n(r),a=n("db2a");function i(t){if(o()(t))return Object(a["a"])(t)}var s=n("774e"),c=n.n(s),l=n("c8bb"),u=n.n(l),f=n("67bb"),d=n.n(f);function p(t){if("undefined"!==typeof d.a&&u()(Object(t)))return c()(t)}var b=n("e630");function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t){return i(t)||p(t)||Object(b["a"])(t)||h()}},7618:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("5d58"),o=n.n(r),a=n("67bb"),i=n.n(a);function s(t){return s="function"===typeof i.a&&"symbol"===typeof o.a?function(t){return typeof t}:function(t){return t&&"function"===typeof i.a&&t.constructor===i.a&&t!==i.a.prototype?"symbol":typeof t},s(t)}},"7a04":function(t,e,n){},"7b5b":function(t,e,n){},"7bbc":function(t,e,n){var r=n("6821"),o=n("9093").f,a={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return o(t)}catch(e){return i.slice()}};t.exports.f=function(t){return i&&"[object Window]"==a.call(t)?s(t):o(r(t))}},"8a81":function(t,e,n){"use strict";var r=n("7726"),o=n("69a8"),a=n("9e1e"),i=n("5ca1"),s=n("2aba"),c=n("67ab").KEY,l=n("79e5"),u=n("5537"),f=n("7f20"),d=n("ca5a"),p=n("2b4c"),b=n("37c8"),h=n("3a72"),m=n("d4c0"),v=n("1169"),y=n("cb7c"),g=n("d3f4"),_=n("4bf8"),x=n("6821"),O=n("6a99"),w=n("4630"),j=n("2aeb"),k=n("7bbc"),S=n("11e9"),C=n("2621"),A=n("86cc"),P=n("0d58"),N=S.f,E=A.f,I=k.f,F=r.Symbol,$=r.JSON,L=$&&$.stringify,M="prototype",T=p("_hidden"),J=p("toPrimitive"),z={}.propertyIsEnumerable,H=u("symbol-registry"),U=u("symbols"),D=u("op-symbols"),R=Object[M],B="function"==typeof F&&!!C.f,W=r.QObject,G=!W||!W[M]||!W[M].findChild,K=a&&l((function(){return 7!=j(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=N(R,e);r&&delete R[e],E(t,e,n),r&&t!==R&&E(R,e,r)}:E,Q=function(t){var e=U[t]=j(F[M]);return e._k=t,e},Y=B&&"symbol"==typeof F.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof F},q=function(t,e,n){return t===R&&q(D,e,n),y(t),e=O(e,!0),y(n),o(U,e)?(n.enumerable?(o(t,T)&&t[T][e]&&(t[T][e]=!1),n=j(n,{enumerable:w(0,!1)})):(o(t,T)||E(t,T,w(1,{})),t[T][e]=!0),K(t,e,n)):E(t,e,n)},V=function(t,e){y(t);var n,r=m(e=x(e)),o=0,a=r.length;while(a>o)q(t,n=r[o++],e[n]);return t},X=function(t,e){return void 0===e?j(t):V(j(t),e)},Z=function(t){var e=z.call(this,t=O(t,!0));return!(this===R&&o(U,t)&&!o(D,t))&&(!(e||!o(this,t)||!o(U,t)||o(this,T)&&this[T][t])||e)},tt=function(t,e){if(t=x(t),e=O(e,!0),t!==R||!o(U,e)||o(D,e)){var n=N(t,e);return!n||!o(U,e)||o(t,T)&&t[T][e]||(n.enumerable=!0),n}},et=function(t){var e,n=I(x(t)),r=[],a=0;while(n.length>a)o(U,e=n[a++])||e==T||e==c||r.push(e);return r},nt=function(t){var e,n=t===R,r=I(n?D:x(t)),a=[],i=0;while(r.length>i)!o(U,e=r[i++])||n&&!o(R,e)||a.push(U[e]);return a};B||(F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===R&&e.call(D,n),o(this,T)&&o(this[T],t)&&(this[T][t]=!1),K(this,t,w(1,n))};return a&&G&&K(R,t,{configurable:!0,set:e}),Q(t)},s(F[M],"toString",(function(){return this._k})),S.f=tt,A.f=q,n("9093").f=k.f=et,n("52a7").f=Z,C.f=nt,a&&!n("2d00")&&s(R,"propertyIsEnumerable",Z,!0),b.f=function(t){return Q(p(t))}),i(i.G+i.W+i.F*!B,{Symbol:F});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ot=0;rt.length>ot;)p(rt[ot++]);for(var at=P(p.store),it=0;at.length>it;)h(at[it++]);i(i.S+i.F*!B,"Symbol",{for:function(t){return o(H,t+="")?H[t]:H[t]=F(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in H)if(H[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),i(i.S+i.F*!B,"Object",{create:X,defineProperty:q,defineProperties:V,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:nt});var st=l((function(){C.f(1)}));i(i.S+i.F*st,"Object",{getOwnPropertySymbols:function(t){return C.f(_(t))}}),$&&i(i.S+i.F*(!B||l((function(){var t=F();return"[null]"!=L([t])||"{}"!=L({a:t})||"{}"!=L(Object(t))}))),"JSON",{stringify:function(t){var e,n,r=[t],o=1;while(arguments.length>o)r.push(arguments[o++]);if(n=e=r[1],(g(e)||void 0!==t)&&!Y(t))return v(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Y(e))return e}),r[1]=e,L.apply($,r)}}),F[M][J]||n("32e9")(F[M],J,F[M].valueOf),f(F,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},"8b67":function(t,e,n){"use strict";var r=n("f3d9"),o=n.n(r);o.a},"8ca8":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",t._b({staticClass:"my-2",attrs:{fields:t.fields},scopedSlots:t._u([{key:"cell()",fn:function(e){return[n("span",{domProps:{innerHTML:t._s(t.$attrs.markText(e.value))}})]}}])},"b-table",Object.assign({},t.$attrs,t.$props),!1))],1)},o=[],a=(n("cadf"),n("456d"),n("ac6a"),n("75fc")),i={data:function(){return{}},computed:{fields:function(){var t=this.setFields(this.items);return t}},methods:{setFields:function(t){var e=[],n=Object(a["a"])(t).reduce((function(t,n){return Object.keys(n).forEach((function(n){if(e.indexOf(n)<0){var r={key:n,sortable:!0};t.push(r),e.push(n)}})),t}),[]);return n}},props:{stacked:{type:Boolean,defaults:!1},items:{type:Array,default:function(){return[]}}}},s=i,c=(n("46fd"),n("2877")),l=Object(c["a"])(s,r,o,!1,null,"cabf33a4",null);e["default"]=l.exports},ac4d:function(t,e,n){n("3a72")("asyncIterator")},d4c0:function(t,e,n){var r=n("0d58"),o=n("2621"),a=n("52a7");t.exports=function(t){var e=r(t),n=o.f;if(n){var i,s=n(t),c=a.f,l=0;while(s.length>l)c.call(t,i=s[l++])&&e.push(i)}return e}},d8d6:function(t,e,n){n("1654"),n("6c1c"),t.exports=n("ccb9").f("iterator")},e671:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table-wrapper"},[n("b-table",t._b({attrs:{fields:t.fields},scopedSlots:t._u([{key:"head(select)",fn:function(e){return[n("div",{staticClass:"d-flex"},[n("b-form-checkbox",{attrs:{indeterminate:t.indeterminate},on:{change:t.toggleAll},model:{value:t.allSelected,callback:function(e){t.allSelected=e},expression:"allSelected"}},[n("span",[t._v(t._s(e.label))])])],1),n("b-button",{staticClass:"w-100 text-nowrap",attrs:{size:"sm",variant:"outline-secondary",disabled:!(t.allSelected||t.indeterminate)},on:{click:t.showExportPreview}},[n("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","file-download"],"fixed-width":""}}),n("span",[t._v("export")])],1)]}},{key:"cell(select)",fn:function(e){return[t.isLoincCode(e.item)?n("div",{staticClass:"select-wrapper"},[t.isMapped(e.item["coding_code"])?t._e():n("b-form-checkbox",{attrs:{disabled:!e.item["coding_code"],value:e.item["coding_code"],switch:"",size:"lg"},model:{value:t.selected_codes,callback:function(e){t.selected_codes=e},expression:"selected_codes"}})],1):t._e()]}},{key:"cell(coding_display)",fn:function(e){return[n("span",{domProps:{innerHTML:t._s(t.$attrs.markText(e.value))}}),e.item["coding_text"]!=e.value?[n("span",{staticClass:"font-italic small d-block"},[t._v("("+t._s(e.item["coding_text"])+")")])]:t._e()]}},{key:"cell(coding_code)",fn:function(e){return[n("span",{domProps:{innerHTML:t._s(t.$attrs.markText(e.value))}}),t.isLoincCode(e.item)?n("div",{staticClass:"small"},[t.isMapped(e.value)?n("b-badge",{attrs:{variant:"info"}},[t._v("mapped")]):n("b-badge",{attrs:{variant:"warning"}},[t._v("not mapped")])],1):t._e()]}},{key:"cell()",fn:function(e){return[t.isObject(e.value)?n("div",[n("Node",{attrs:{payload:e.value}})],1):n("div",[n("span",{domProps:{innerHTML:t._s(t.$attrs.markText(e.value))}})])]}}])},"b-table",Object.assign({},t.$attrs,t.$props),!1)),n("b-alert",{attrs:{show:!0}},[t._v("\n    Please note that results with multiple coding systems are split in separated rows.\n  ")]),n("b-modal",{ref:"export-modal",attrs:{title:"Export codes"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var r=e.cancel;return[n("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(t){return r()}}},[t._v("\n            Cancel\n          ")]),n("b-button",{attrs:{size:"sm",variant:"success",disabled:!t.exportFileName},on:{click:function(e){return t.onExportClicked()}}},[n("font-awesome-icon",{attrs:{icon:["fas","file-export"],"fixed-width":""}}),n("span",{staticClass:"ml-2"},[t._v("Export")])],1)]}}])},[n("div",[n("p",{staticClass:"mb-2"},[t._v("Do you want to export the current selection?")]),n("b-table",{staticClass:"mb-2",attrs:{small:"",items:t.exportItems,striped:"",bordered:"","sticky-header":"100"},scopedSlots:t._u([{key:"cell(code)",fn:function(e){return[n("b",{staticClass:"text-nowrap"},[t._v(t._s(e.value))])]}}])}),n("b-input",{attrs:{placeholder:"enter a name for this selection..."},model:{value:t.exportFileName,callback:function(e){t.exportFileName="string"===typeof e?e.trim():e},expression:"exportFileName"}})],1)])],1)},o=[],a=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("768b")),i=(n("ffc1"),n("75fc")),s=(n("4917"),n("f751"),n("7618")),c=(n("cadf"),n("456d"),n("ac6a"),n("6fc5")),l=(n("c1df"),n("7eac"),function(t,e){var n=window.URL.createObjectURL(new Blob([t])),r=document.createElement("a");r.href=n,r.setAttribute("download",e),document.body.appendChild(r),r.click(),document.body.removeChild(r)}),u=n("8ca8");function f(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=d(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,i=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function d(t,e){if(t){if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var b=function t(e){var n={};return Object.keys(e).forEach((function(r){"object"===Object(s["a"])(e[r])&&null!==e[r]?Object.assign(n,t(e[r])):n[r]=e[r]})),n},h={extends:u["default"],components:{Node:c["a"]},data:function(){return{exportFileName:"codes.txt",allSelected:!1,indeterminate:!1,selected_codes:[],custom_fields:[{key:"select",sortable:!1},{key:"coding_display",sortable:!0},{key:"coding_code",sortable:!0},{key:"value",sortable:!0},{key:"valueUnit",sortable:!0},{key:"timestamp",sortable:!0},{key:"coding_system",sortable:!0}]}},methods:{isObject:function(t){return"object"==Object(s["a"])(t)},isNonArrayObject:function(t){return!Array.isArray(t)&&this.isObject(t)},shouldDisplayCell:function(t){return!(Array.isArray(t)&&t.length<1)},isLoincCode:function(t){var e=t.coding_system;if(e)return e.match(/loinc/i)},isMapped:function(t){return this.cdpMappingNames.indexOf(t)>0},toggleAll:function(t){this.selected_codes=t?Object.keys(this.selectable).slice():[]},showExportPreview:function(){var t=this.$refs["export-modal"];t&&t.show()},onExportClicked:function(){var t,e="",n=f(this.exportItems);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.code,a=r.label;e+="".concat(o,", ").concat(a,"\n")}}catch(s){n.e(s)}finally{n.f()}l(e,this.exportFileName);var i=this.$refs["export-modal"];i&&i.hide()}},computed:{itemsProxy:function(){var t=Object(i["a"])(this.items),e=t.map((function(t){for(var e=t.code,n=void 0===e?{}:e,r=0,o=Object.entries(b(n));r<o.length;r++){var i=Object(a["a"])(o[r],2),s=i[0],c=i[1];t["coding_".concat(s)]=c}return t}));return e},allChecked:{get:function(){return this.selected_codes.length==Object.keys(this.selectable).length},set:function(t){console.log("allChecked",t)}},intermediateChecked:{get:function(){return 0!=this.selected_codes.length&&this.selected_codes.length!=Object.keys(this.selectable).length},set:function(t){console.log("intermediate",t)}},selectable:function(){var t=this,e={};return this.itemsProxy.forEach((function(n){if(t.isLoincCode(n)){var r=n.coding_code,o=n.coding_display;if(r&&!(Object.keys(e).indexOf(r)>=0)){var a=t.cdpMappingNames;a.indexOf(r)>=0||(e[r]=o)}}})),e},exportItems:function(){for(var t=[],e=Object(i["a"])(this.selected_codes),n=0,r=Object.entries(this.selectable);n<r.length;n++){var o=Object(a["a"])(r[n],2),s=o[0],c=o[1],l={code:s,label:c};e.indexOf(s)>=0&&t.indexOf(l)<0&&t.push(l)}return t},fields:function(){return this.custom_fields},cdpMappingNames:function(){var t=this.$store.getters["project/mappingSourceNames"];return t}},watch:{items:{immediate:!0,handler:function(){this.selected_codes=[]}},selected_codes:function(t){0===t.length?(this.indeterminate=!1,this.allSelected=!1):t.length===Object.keys(this.selectable).length?(this.indeterminate=!1,this.allSelected=!0):(this.indeterminate=!0,this.allSelected=!1)}}},m=h,v=(n("15a5"),n("2877")),y=Object(v["a"])(m,r,o,!1,null,"13ffc694",null);e["default"]=y.exports},f3d9:function(t,e,n){}}]);
//# sourceMappingURL=mapping_helper_vue.umd.min.2.js.map