(("undefined"!==typeof self?self:this)["webpackJsonpdatamart_vue"]=("undefined"!==typeof self?self:this)["webpackJsonpdatamart_vue"]||[]).push([[1],{"03a9":function(t,e,i){},"0c35":function(t,e,i){"use strict";var s=i("4e06"),a=i.n(s);a.a},3216:function(t,e,i){},"41a0":function(t,e,i){"use strict";var s=i("8dbb"),a=i.n(s);a.a},"4e06":function(t,e,i){},"575b":function(t,e,i){"use strict";var s=i("03a9"),a=i.n(s);a.a},"76ae":function(t,e,i){"use strict";var s=i("faca"),a=i.n(s);a.a},8078:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-card",{attrs:{"header-tag":"header","header-bg-variant":"info","header-text-variant":"white","no-body":""},scopedSlots:t._u([{key:"header",fn:function(){return[i("div",{staticClass:"d-flex align-items-center"},[i("h4",{staticClass:"mb-0  mr-5 font-weight-bold text-nowrap"},[t._v("Source Fields List")]),i("b-form-group",{staticClass:"mb-0 ml-auto",attrs:{"label-for":"filter-input","label-cols-sm":"0","label-align-sm":"left","label-size":"sm"}},[i("b-input-group",{attrs:{size:"sm"}},[i("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search",debounce:"300"},model:{value:t.textProxy,callback:function(e){t.textProxy=e},expression:"textProxy"}}),i("b-input-group-append",[i("b-button",{attrs:{disabled:!t.textProxy},on:{click:t.resetQuery}},[t._v("Clear")])],1)],1)],1)],1)]},proxy:!0}])},[i("div",{staticClass:"p-2",attrs:{id:"selected-list"}},[i("FieldCategory",{attrs:{container:t.container}})],1)])],1)},a=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.totalVisible>0?i("div",{staticClass:"field-category m-0 p-0"},[""!==t.container.id?i("header",{staticClass:"d-flex"},[i("section",{staticClass:"d-inline mr-2",on:{click:t.toggle}},[t.collapsed?i("font-awesome-icon",{attrs:{icon:["fas","chevron-circle-right"],"fixed-width":""}}):i("font-awesome-icon",{attrs:{icon:["fas","chevron-circle-down"],"fixed-width":""}})],1),i("section",{staticClass:"font-weight-bold",on:{click:t.toggle}},[i("span",[t._v(t._s(t.container.id))]),i("span",{staticClass:"d-block small font-italic text-muted"},[t.query?[t._v("showing "+t._s(t.totalVisible)+" of "+t._s(t.totalOverallFields)+" | ")]:t._e(),[t._v(t._s(t.totalOverallSelected)+"/"+t._s(t.totalVisible)+" field"+t._s(1===t.totalVisible?"":"s")+" selected")],t.totalOverallDisabled>0?[t._v(" ("+t._s(t.totalOverallDisabled)+" field"+t._s(1===t.totalOverallDisabled?"":"s")+" disabled)")]:t._e()],2)]),i("div",{staticClass:"ml-auto text-nowrap"},[i("b-button",{attrs:{size:"sm",variant:t.allSelected?"success":"light"},on:{click:function(e){return t.toggleAll(!t.allSelected)}}},[t.allSelected?i("span",[t._v("deselect all")]):i("span",[t._v("select all")])])],1)]):t._e(),t.collapsed&&""!==t.container.id?t._e():i("div",{staticClass:"children",class:{"ml-5":""!==t.container.id}},[t._l(t.container.children,(function(e,s){return[!t.isFhirField(e)||t.isFhirField(e)&&!e.hidden?i("section",{key:s},[t.isFhirField(e)?[i("FieldNode",{staticClass:"py-1",attrs:{data:e}})]:[i("FieldCategory",{staticClass:"py-1",attrs:{container:e}})]],2):t._e()]}))],2)]):t._e()},n=[],l=(i("4de4"),i("d81d"),i("1a2b")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ml-0 p-0 d-flex align-items-center fhir"},[i("b-form-checkbox",{attrs:{id:"checkbox-"+t.data.field,disabled:t.disabled,switch:""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),i("label",{staticClass:"m-0",class:{"disabled-option":t.data.disabled},attrs:{for:"checkbox-"+t.data.field}},[i("span",[t._v(t._s(t.data.field))]),i("span",{staticClass:"ml-2 font-italic"},[t._v("("+t._s(t.data.label)+")")])]),t.data.disabled?i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-2 text-danger",attrs:{title:""+t.data.disabled_reason}},[i("font-awesome-icon",{attrs:{icon:["fas","exclamation-circle"],"fixed-width":""}})],1):t._e()],1)},d=[],c=(i("c975"),{data:function(){return{}},props:{data:{type:[l["a"]],default:null}},created:function(){},computed:{mandatoryFields:function(){return this.$store.state.settings.mandatoryFields},disabled:function(){var t=this.data.field;return this.mandatoryFields.indexOf(t)>=0},selected:{get:function(){return this.mandatoryFields.indexOf(this.data.field)>=0||this.data.selected},set:function(t){var e=this.data.field;this.$store.dispatch("revision/updateFields",{name:e,checked:t})}}},methods:{onClick:function(t){var e={field:t.field+="miao"};this.$store.dispatch("metadata/update",{item:t,params:e})},onChange:function(t){this.data.selected=t}}}),u=c,f=(i("d57d"),i("2877")),h=Object(f["a"])(u,o,d,!1,null,"68ec7a74",null),m=h.exports,p=i("2ef0"),v={name:"FieldCategory",data:function(){return{collapsed:!0,count:0}},components:{FieldNode:m},props:{container:{type:l["b"],default:null}},computed:{query:function(){return this.$store.state.metadata.query},fields:function(){return this.container.getFields()},overallFields:function(){return this.container.getFields(!0)},visibleFields:function(){return this.fields.filter((function(t){var e=t.hidden;return!e}))},overallVisibleFields:function(){return this.overallFields.filter((function(t){var e=t.hidden;return!e}))},overallDisabledFields:function(){return this.overallFields.filter((function(t){var e=t.disabled;return e}))},selected:function(){var t=this.$store.state.revision.fields,e=this.visibleFields.map((function(t){var e=t.field;return e}));return Object(p["intersection"])(e,t)},overallSelected:function(){var t=this.$store.state.revision.fields,e=this.overallVisibleFields.map((function(t){var e=t.field;return e}));return Object(p["intersection"])(e,t)},totalFields:function(){return this.fields.length},totalOverallFields:function(){return this.overallFields.length},totalSelected:function(){return this.selected.length},totalOverallSelected:function(){return this.overallSelected.length},totalVisible:function(){return this.overallVisibleFields.length},totalOverallDisabled:function(){return this.overallDisabledFields.length},allSelected:{get:function(){var t=this.totalVisible==this.totalOverallSelected;return t},set:function(t){var e=this.$store.state.revision.fields,i=this.overallVisibleFields.map((function(t){var e=t.field;return e}));e=t?Object(p["union"])(i,e):Object(p["difference"])(e,i),this.$store.dispatch("revision/setFields",e)}},indeterminate:{get:function(){return 0!=this.totalSelected&&!this.allSelected},set:function(t){}}},methods:{isFhirField:function(t){return t instanceof l["a"]},toggle:function(){this.collapsed=!this.collapsed},toggleAll:function(t){var e=this.$store.state.revision.fields,i=this.overallVisibleFields.map((function(t){var e=t.field;return e}));e=t?Object(p["union"])(i,e):Object(p["difference"])(e,i),this.$store.dispatch("revision/setFields",e)}},watch:{query:{immediate:!1,handler:function(t){""===t&&(this.collapsed=!0)}}}},b=v,g=(i("76ae"),Object(f["a"])(b,r,n,!1,null,"1e3f178e",null)),_=g.exports,x={components:{FieldCategory:_},data:function(){return{text:""}},created:function(){this.resetQuery()},computed:{hiddenFields:function(){return this.$store.state.metadata.hiddenList},container:function(){var t=this.$store.getters["metadata/filteredGroups"];return t},textProxy:{get:function(){return this.text},set:function(t){this.text=t,this.applyFilter()}}},methods:{resetQuery:function(){this.textProxy=""},applyFilter:function(){this.$store.dispatch("metadata/setQuery",this.text)}}},F=x,y=(i("41a0"),Object(f["a"])(F,s,a,!1,null,"3596dd8e",null));e["a"]=y.exports},"8dbb":function(t,e,i){},"9fd2":function(t,e,i){"use strict";var s=i("3216"),a=i.n(s);a.a},c63b:function(t,e,i){"use strict";i.d(e,"b",(function(){return w}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"revision-manager-view"},[t.hidden_groups.includes(t.settings_groups.DATE)?t._e():i("div",{staticClass:"setting-group card"},[t._m(0),i("div",{staticClass:"card-body"},[i("DateRange"),i("ErrorList",{attrs:{errors:t.errors.date}})],1)]),t.hidden_groups.includes(t.settings_groups.FIELDS)?t._e():i("div",{staticClass:"setting-group card mt-4"},[i("div",{staticClass:"card-header"},[i("span",{staticClass:"setting-title"},[t._v("Choose fields in EHR for which to pull data")]),t._t("header")],2),i("div",{staticClass:"card-body"},[i("SelectableFhirResourcesPanel"),i("ErrorList",{attrs:{errors:t.errors.fields}})],1)]),t.hidden_groups.includes(t.settings_groups.MRNS)?t._e():i("div",{staticClass:"setting-group card mt-4"},[t._m(1),i("div",{staticClass:"card-body"},[i("MRNListEditor"),i("ErrorList",{attrs:{errors:t.errors.mrns}})],1)])])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-header"},[i("span",{staticClass:"setting-title"},[t._v("If pulling time-based data, select the range of time from which to pull data (optional)")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-header"},[i("span",{staticClass:"setting-title"},[t._v("Enter medical record numbers of patients to import from the EHR (one per line, optional)")])])}],r=(i("dca8"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"MRNs-wrapper"},[i("div",{staticClass:"textarea-container"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.MRN_text,expression:"MRN_text"}],domProps:{value:t.MRN_text},on:{input:function(e){e.target.composing||(t.MRN_text=e.target.value)}}}),i("aside",[i("span",[i("b",[t._v("Total MRNs:")]),t._v(" "+t._s(t.list.length))])])])])}),n=[],l=(i("a15b"),i("2ef0")),o=i("e343"),d={name:"MRNListEditor",data:function(){return{text:""}},created:function(){this.getTextFromList(),o["a"].$on("REVISION_SET",this.getTextFromList)},destroyed:function(){o["a"].$off("REVISION_SET",this.getTextFromList)},computed:{MRN_text:{get:function(){return this.text},set:function(t){this.text=t,this.updateMRNs(t)}},list:function(){return this.$store.state.revision.mrns}},methods:{getTextFromList:function(){this.text=this.list.join("\n")},updateMRNs:Object(l["debounce"])((function(t){this.$store.dispatch("revision/setMRNs",t)}),250)}},c=d,u=(i("0c35"),i("2877")),f=Object(u["a"])(c,r,n,!1,null,"33e179b0",null),h=f.exports,m=i("8078"),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex"},[i("b-form-group",{staticClass:"w-50",attrs:{"label-cols":"2",id:"date-min-group",label:"from","label-for":"date-min"}},[i("b-form-datepicker",{attrs:{"date-format-options":t.dateFormat,placeholder:"from",max:t.max,"today-button":"","reset-button":"","close-button":"",id:"date-min"},model:{value:t.min,callback:function(e){t.min=e},expression:"min"}})],1),i("b-form-group",{staticClass:"ml-2 w-50",attrs:{"label-cols":"2",id:"date-max-group",label:"to","label-for":"date-max"}},[i("b-form-datepicker",{attrs:{"date-format-options":t.dateFormat,placeholder:"end date",min:t.min,"today-button":"","reset-button":"","close-button":"",id:"date-max"},model:{value:t.max,callback:function(e){t.max=e},expression:"max"}})],1)],1)},v=[],b={data:function(){return{dateFormat:{year:"numeric",month:"2-digit",day:"2-digit"}}},computed:{min:{get:function(){var t=this.$store.state.revision.dateMin;return t},set:function(t){this.$store.dispatch("revision/setDateMin",t)}},max:{get:function(){var t=this.$store.state.revision.dateMax;return t},set:function(t){this.$store.dispatch("revision/setDateMax",t)}}}},g=b,_=Object(u["a"])(g,p,v,!1,null,"50158254",null),x=_.exports,F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"error-list"},[i("transition",{attrs:{name:"error"}},[t.errors.length?i("ul",{staticClass:"errors"},t._l(t.errors,(function(e,s){return i("li",{key:s},[i("i",{staticClass:"fas fa-exclamation-circle"}),t._v(" "+t._s(e))])})),0):t._e()])],1)},y=[],C={name:"ErrorList",props:{errors:{type:Array,default:function(){return[]}}}},$=C,E=(i("575b"),Object(u["a"])($,F,y,!1,null,"6da103dd",null)),O=E.exports,w=Object.freeze({DATE:"date",FIELDS:"fields",MRNS:"mrns"}),S={name:"RevisionManagerView",data:function(){return{settings_groups:w}},components:{MRNListEditor:h,SelectableFhirResourcesPanel:m["a"],DateRange:x,ErrorList:O},props:{hidden_groups:{type:Array,default:function(){return[]}}},computed:{isDirty:function(){return this.$store.getters["revision/isDirty"]},errors:function(){return this.$store.state.validator.errors}}},R=S,k=(i("9fd2"),Object(u["a"])(R,s,a,!1,null,"3c0bdee7",null));e["a"]=k.exports},d57d:function(t,e,i){"use strict";var s=i("f9ff"),a=i.n(s);a.a},f9ff:function(t,e,i){},faca:function(t,e,i){}}]);
//# sourceMappingURL=datamart_vue.umd.min.1.js.map