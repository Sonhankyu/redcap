(("undefined"!==typeof self?self:this)["webpackChunkfhir_stats_vue"]=("undefined"!==typeof self?self:this)["webpackChunkfhir_stats_vue"]||[]).push([[266],{6266:function(t,a,e){"use strict";e.r(a),e.d(a,{default:function(){return V}});var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-wrapper"},[e("SearchForm"),e("Charts",{staticClass:"mt-2"})],1)},n=[],o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[e("div",{staticClass:"d-flex mb-2"},[e("b-form-datepicker",{attrs:{placeholder:"start date",max:t.toProxy||t.today},model:{value:t.fromProxy,callback:function(a){t.fromProxy=a},expression:"fromProxy"}}),e("b-form-datepicker",{staticClass:"ml-2",attrs:{placeholder:"end date",min:t.fromProxy,max:t.today},model:{value:t.toProxy,callback:function(a){t.toProxy=a},expression:"toProxy"}})],1),e("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.loading}},[t.loading?e("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:"","fixed-width":""}}):e("font-awesome-icon",{attrs:{icon:["fas","chart-bar"],"fixed-width":""}}),e("span",{staticClass:"ml-2"},[t._v("Display results")])],1),e("b-button",{staticClass:"ml-2",attrs:{type:"reset",variant:"danger"}},[e("font-awesome-icon",{attrs:{icon:["fas","undo"],"fixed-width":""}}),e("span",{staticClass:"ml-2"},[t._v("Reset")])],1)],1)],1)},s=[],i=e(4476),l=(e(5666),{data:function(){var t=new Date;return{loading:!1,today:t}},computed:{queryParams:function(){return{date_start:this.fromProxy,date_end:this.toProxy}},fromProxy:{get:function(){return this.$route.query.date_start},set:function(t){var a=this.queryParams;a.date_start=t,this.$router.push({query:a})}},toProxy:{get:function(){return this.$route.query.date_end},set:function(t){var a=this.queryParams;a.date_end=t,this.$router.push({query:a})}}},methods:{onSubmit:function(t){var a=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.preventDefault(),a.loading=!0,e.next=4,a.$store.dispatch("stats/getStats",{from:a.fromProxy,to:a.toProxy});case 4:a.loading=!1;case 5:case"end":return e.stop()}}),e)})))()},onReset:function(){this.fromProxy=this.toProxy=null}}}),u=l,c=e(5961),d=(0,c.Z)(u,o,s,!1,null,null,null),h=d.exports,f=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}]},[e("b-tabs",{attrs:{"content-class":"mt-3"},scopedSlots:t._u([{key:"tabs-end",fn:function(){return[e("div",{staticClass:"ml-auto"})]},proxy:!0}])},[e("b-tab",{attrs:{title:"Overall",active:""}},[e("TotalChart",{attrs:{chartdata:t.overall_total}}),e("DailyChart",{attrs:{chartdata:t.overall_daily}})],1),e("b-tab",{attrs:{title:"Clinical Data Mart"}},[e("TotalChart",{attrs:{chartdata:t.CDM_total}}),e("DailyChart",{attrs:{chartdata:t.CDM_daily}})],1),e("b-tab",{attrs:{title:"Clinical Data Pull"}},[e("TotalChart",{attrs:{chartdata:t.CDP_total}}),e("DailyChart",{attrs:{chartdata:t.CDP_daily}})],1),e("b-tab",{attrs:{title:"Clinical Data Pull (instant adjudication)"}},[e("TotalChart",{attrs:{chartdata:t.CDP_I_total}}),e("DailyChart",{attrs:{chartdata:t.CDP_I_daily}})],1)],1),e("b-button",{staticClass:"mt-2 text-white",attrs:{size:"sm",href:t.metadata.export_link,download:""}},[t.loading?e("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:"","fixed-width":""}}):e("font-awesome-icon",{attrs:{icon:["fas","file-archive"],"fixed-width":""}}),e("span",{staticClass:"ml-2"},[t._v("Export CSV")])],1)],1)},m=[],p=e(8240),y=e(629),C=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("canvas",{ref:"chart"})])},v=[],_=e(7352),b=e(2181);b.kL.register.apply(b.kL,(0,_.Z)(b.zX));var k={data:function(){return{chart:null}},computed:{},methods:{makeChart:function(){var t=this.$refs["chart"];if(t)return this.chart&&this.chart.destroy(),this.chart=new b.kL(t,{type:"bar",data:this.chartdata,options:{responsive:!0,plugins:{title:{display:!0,text:"Total entries"}},interaction:{intersect:!1,mode:"dataset"},x:{title:{display:!0,text:"Day"}},y:{title:{display:!0,text:"Entries"}}}}),this.chart}},props:{chartdata:{type:Object,default:null},options:{type:Object,default:function(){return{responsive:!0,maintainAspectRatio:!1}}}},watch:{chartdata:{immediate:!0,deep:!0,handler:function(){this.makeChart()}}}},D=k,x=(0,c.Z)(D,C,v,!1,null,null,null),P=x.exports,g=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("canvas",{ref:"chart"})])},w=[];e(1249);b.kL.register.apply(b.kL,(0,_.Z)(b.zX));var M={data:function(){return{chart:null}},computed:{data:function(){var t={borderWidth:1,fill:!1,cubicInterpolationMode:"monotone",tension:.4},a=(0,p.Z)({},this.chartdata),e=a.labels,r=a.datasets;return r=r.map((function(a){return(0,p.Z)((0,p.Z)({},t),a)})),{labels:e,datasets:r}}},methods:{makeChart:function(){var t=this.$refs["chart"];if(t)return this.chart&&this.chart.destroy(),this.chart=new b.kL(t,{type:"line",data:this.data,options:{responsive:!0,plugins:{title:{display:!0,text:"Entries per day"}},interaction:{intersect:!1,mode:"x"},scales:{x:{title:{display:!0,text:"Day"}},y:{title:{display:!0,text:"Entries"}}}}}),this.chart}},props:{chartdata:{type:Object,default:null},options:{type:Object,default:function(){return{responsive:!0,maintainAspectRatio:!1}}}},watch:{chartdata:{immediate:!0,deep:!0,handler:function(){this.makeChart()}}}},Z=M,j=(0,c.Z)(Z,g,w,!1,null,null,null),O=j.exports,$=e(1163),T=e(448),E=e(2394),q=e(8496),R=(e(2222),e(9600),e(2479),e(7941),e(9720),{red_alt1:[255,99,132],blue_alt1:[54,162,235],yellow_alt1:[255,206,86],green_alt1:[75,192,192],purple_alt1:[153,102,255],orange_alt1:[255,159,64],teal_alt1:[32,201,151],cyan_alt1:[23,162,184],lime:[0,255,0],aqua:[0,255,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],silver:[192,192,192],blue:[0,0,255],fuchsia:[255,0,255],green:[0,128,0],teal:[0,128,128],purple:[128,0,128],gray:[128,128,128],red:[255,0,0],yellow:[255,255,0],black:[0,0,0],white:[255,255,255]}),I=function(){function t(){(0,E.Z)(this,t)}return(0,q.Z)(t,[{key:"makeCssColor",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return a=parseFloat(a),"rgba(".concat(t.join(", "),", ").concat(a,")")}},{key:"makeCssColors",value:function(t){var a=this,e=function(e){return a.makeCssColor(e,t)};return Object.values(R).map(e)}},{key:"getRandomColor",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;a=parseFloat(a),t+=1;var e=200,r=Math.round(t*Math.random()*200)%e,n=Math.round(t*Math.random()*200)%e,o=Math.round(t*Math.random()*200)%e,s=[r,n,o,a].join(", ");return"rgba("+s+")"}}]),t}(),S=function t(){var a=this;(0,E.Z)(this,t),(0,T.Z)(this,"makeTotalChartData",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={labels:Object.keys(t),datasets:[{data:t,label:e,backgroundColor:a.colorMaker.makeCssColors(.2),borderColor:a.colorMaker.makeCssColors(1),borderWidth:1}]};return r})),(0,T.Z)(this,"makeDailyChartData",(function(t){for(var e=function(t){for(var a={},e=0,r=Object.values(t);e<r.length;e++)for(var n=r[e],o=0,s=Object.entries(n);o<s.length;o++){var i=(0,$.Z)(s[o],2),l=i[0],u=i[1];a[l]||(a[l]=[]),a[l].push(u)}return a},r=e(t),n=Object.keys(t),o=[],s=0,i=a.colorMaker.makeCssColors(.2),l=a.colorMaker.makeCssColors(1),u=0,c=Object.entries(r);u<c.length;u++){var d=(0,$.Z)(c[u],2),h=d[0],f=d[1],m=s++,p={label:h,backgroundColor:i[m],borderColor:l[m],fill:!1,data:f};o.push(p)}var y={labels:n,datasets:o};return y})),this.colorMaker=new I},L=new S,F={components:{TotalChart:P,DailyChart:O},data:function(){return{loading:!1}},computed:(0,p.Z)({},(0,y.rn)({loaded:function(t){return t.stats.loaded},overall_total:function(t){return L.makeTotalChartData(t.stats.overall_total,"Overall total")},CDM_total:function(t){return L.makeTotalChartData(t.stats.CDM_total,"CDM total")},CDP_total:function(t){return L.makeTotalChartData(t.stats.CDP_total,"CDP total")},CDP_I_total:function(t){return L.makeTotalChartData(t.stats.CDP_I_total,"CDP instant adjudication total")},overall_daily:function(t){return L.makeDailyChartData(t.stats.overall_daily)},CDM_daily:function(t){return L.makeDailyChartData(t.stats.CDM_daily)},CDP_daily:function(t){return L.makeDailyChartData(t.stats.CDP_daily)},CDP_I_daily:function(t){return L.makeDailyChartData(t.stats.CDP_I_daily)},cdm_users_count:function(t){return t.stats.cdm_users_count},date_from:function(t){return t.stats.date_from},date_to:function(t){return t.stats.date_to},metadata:function(t){return t.stats.metadata}})),methods:{}},z=F,A=(0,c.Z)(z,f,m,!1,null,null,null),W=A.exports,X={name:"HomePage",components:{SearchForm:h,Charts:W},methods:{},computed:{}},H=X,N=(0,c.Z)(H,r,n,!1,null,"3ece3310",null),V=N.exports}}]);
//# sourceMappingURL=fhir_stats_vue.umd.min.266.js.map